<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–£—á–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<h1>–£—á–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h1>

<!-- –§–∏–ª—å—Ç—Ä—ã -->
<!-- –§–∏–ª—å—Ç—Ä—ã -->
<form th:action="@{/employees}" method="get">
    <select name="departmentId"
            th:onchange="if(this.value!=''){document.getElementsByName('positionId')[0].disabled=true}else{document.getElementsByName('positionId')[0].disabled=false}">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª</option>
        <option th:each="dep : ${departments}"
                th:value="${dep.id}"
                th:text="${dep.name}"
                th:selected="${param.departmentId != null && param.departmentId[0] == dep.id.toString()}">
        </option>
    </select>

    <select name="positionId"
            th:onchange="if(this.value!=''){document.getElementsByName('departmentId')[0].disabled=true}else{document.getElementsByName('departmentId')[0].disabled=false}">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å</option>
        <option th:each="pos : ${positions}"
                th:value="${pos.id}"
                th:text="${pos.name}"
                th:selected="${param.positionId != null && param.positionId[0] == pos.id.toString()}">
        </option>
    </select>

    <button type="submit">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
</form>

<!-- –ü–æ–∏—Å–∫ –ø–æ –§–ò–û -->
<form th:action="@{/employees/findByName}" method="get" style="margin-top: 5px;">
    <input type="text" name="fullName" placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
    <button type="submit">üîç</button>
</form>

<!-- –¢–∞–±–ª–∏—Ü–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
<table>
    <thead>
    <tr>
        <th>–§–ò–û</th>
        <th>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
        <th>–ü–∞—Å–ø–æ—Ä—Ç</th>
        <th>–ö–æ–Ω—Ç–∞–∫—Ç—ã</th>
        <th>–ê–¥—Ä–µ—Å</th>
        <th>–û—Ç–¥–µ–ª</th>
        <th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th>
        <th>–ó–∞—Ä–ø–ª–∞—Ç–∞</th>
        <th>–î–∞—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∏—è</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="emp : ${employees}">
        <td th:text="${emp.fullName}"></td>
        <td th:text="${emp.birthDate}"></td>
        <td th:text="${emp.passportNumber}"></td>
        <td th:text="${emp.contactInfo}"></td>
        <td th:text="${emp.address}"></td>
        <td th:text="${emp.department.name}"></td>
        <td th:text="${emp.position.name}"></td>
        <td th:text="${emp.salary}"></td>
        <td th:text="${emp.hireDate}"></td>
        <td th:text="${emp.fired ? '–£–≤–æ–ª–µ–Ω' : '–î–µ–π—Å—Ç–≤—É—é—â–∏–π'}"></td>
        <td>
            <!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ —É–≤–æ–ª–µ–Ω -->
            <a th:href="@{/employees/{id}(id=${emp.id})}" th:if="${!emp.fired}">‚úèÔ∏è</a>

            <!-- –£–≤–æ–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ —É–≤–æ–ª–µ–Ω -->
            <form th:action="@{/employees/fire/{id}(id=${emp.id})}" method="post" th:if="${!emp.fired}">
                <button type="submit">–£–≤–æ–ª–∏—Ç—å</button>
            </form>

            <!-- –ï—Å–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —É–≤–æ–ª–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Ç–∫—É -->
            <span th:if="${emp.fired}"> ‚ùå</span>
        </td>

    </tr>
    </tbody>
</table>

<!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ -->
<p><a th:href="@{/employees/create}">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</a></p>

</body>
</html>
